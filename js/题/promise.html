<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>promise</title>
</head>
<body>
<script>
    const p1 = new Promise(function (resolve, reject) {
        setTimeout(() => reject(new Error('fail')), 3000)
    })

    const p2 = new Promise(function (resolve, reject) {
        setTimeout(() => resolve(p1), 1000);
    })
//    const p2 = new Promise(function (resolve, reject) {
//        setTimeout(() => resolve('hyd'), 1000)
//    })

    //fail存在就不会调用catch
    //可以发现reject方法的作用，等同于抛出错误
    //一般来说，不要在then方法里面定义 Reject 状态的回调函数（即then的第二个参数），总是使用catch方法。
    p2.then( result => console.log("没有"),
    fail => console.log('失败')).catch(error => {console.log('这里');  console.log(error)})

//    p2.then(result => {
//        console.log("没有")
//        console.log(result);
//        return result;      //这个参数就会传到第二个then参数中
//    }
//        ).then(result => console.log(result))
//    .catch(error => {
//        console.log('这里')
//        console.log(error)})


//    const p2 = new Promise(function (resolve, reject) {
//        setTimeout(() => resolve('hyd'), 1000)
//    })

//    p2.then(function(resolve){
//        console.log("resolve");
//        console.log(resolve)
//    },function(reject){
//        console.log('reject')
//        console.log(reject);
//    }).catch(error => conole.log('sha'))

//        p2.then((resolve) => {console.log('resolve')},(reject)=>{console.log('reject')})


//  尽量用catch代替error
//    // bad
//    promise
//        .then(function(data) {
//            // success
//        }, function(err) {
//            // error
//        });
//
//    // good
//    promise
//        .then(function(data) { //cb
//            // success
//        })
//        .catch(function(err) {
//            // error
//        });


</script>

</body>
</html>